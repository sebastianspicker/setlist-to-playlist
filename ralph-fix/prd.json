{
  "project": "Setlist to Playlist â€“ Ralph Fix (Apply Audit Findings)",
  "branchName": "main",
  "description": "Full debug: apply code fixes from ralph-audit findings, run pnpm lint and pnpm test, iterate until both pass. Load findings from ralph-fix/findings/*.json (generated by scripts/md-to-json.js). Each story fixes one audit area. Implemented fixes documented in ralph-fix/fixes/*.md (audit-style markdown per story).",
  "verificationCommands": {
    "lint": "pnpm lint",
    "test": "pnpm test"
  },
  "userStories": [
    {
      "id": "FIX-001",
      "title": "Fix 01-api-routes findings",
      "description": "Apply code fixes for all Critical and High findings from the Next.js API routes audit. Fix Medium/Low where straightforward.",
      "acceptanceCriteria": [
        "All Critical and High findings from audit 01-api-routes are addressed in code",
        "pnpm lint and pnpm test pass"
      ],
      "priority": 1,
      "passes": true,
      "findingsFile": "01-api-routes.json",
      "notes": "Load ralph-fix/findings/01-api-routes.json. Edit files listed in findings. Prefer Critical then High then Medium. Do not break existing behavior. Run pnpm lint and pnpm test after changes."
    },
    {
      "id": "FIX-002",
      "title": "Fix 02-apple-token findings",
      "description": "Apply code fixes for all Critical and High findings from the Apple Developer Token & JWT audit.",
      "acceptanceCriteria": [
        "All Critical and High findings from audit 02-apple-token are addressed",
        "pnpm lint and pnpm test pass"
      ],
      "priority": 2,
      "passes": true,
      "findingsFile": "02-apple-token.json",
      "notes": "Load ralph-fix/findings/02-apple-token.json. Fix token route, CORS, caching headers, preflight, logging. Run verification after."
    },
    {
      "id": "FIX-003",
      "title": "Fix 03-setlist-proxy findings",
      "description": "Apply code fixes for setlist.fm proxy audit findings.",
      "acceptanceCriteria": [
        "Critical/High findings from audit 03-setlist-proxy fixed",
        "pnpm lint and pnpm test pass"
      ],
      "priority": 3,
      "passes": true,
      "findingsFile": "03-setlist-proxy.json",
      "notes": "Load ralph-fix/findings/03-setlist-proxy.json. Fix proxy route and setlistfm.ts as per findings."
    },
    {
      "id": "FIX-004",
      "title": "Fix 04-core-setlist-matching findings",
      "description": "Apply code fixes for core setlist and matching audit findings.",
      "acceptanceCriteria": [
        "Critical/High findings from audit 04-core-setlist-matching fixed",
        "pnpm lint and pnpm test pass"
      ],
      "priority": 4,
      "passes": true,
      "findingsFile": "04-core-setlist-matching.json",
      "notes": "Load ralph-fix/findings/04-core-setlist-matching.json. Edit packages/core only."
    },
    {
      "id": "FIX-005",
      "title": "Fix 05-setlist-import-ui findings",
      "description": "Apply code fixes for setlist import UI audit findings.",
      "acceptanceCriteria": [
        "Critical/High findings from audit 05-setlist-import-ui fixed",
        "pnpm lint and pnpm test pass"
      ],
      "priority": 5,
      "passes": true,
      "findingsFile": "05-setlist-import-ui.json",
      "notes": "Load ralph-fix/findings/05-setlist-import-ui.json. Fix SetlistImportView, SetlistPreview, api/config."
    },
    {
      "id": "FIX-006",
      "title": "Fix 06-matching-ui findings",
      "description": "Apply code fixes for matching UI audit findings.",
      "acceptanceCriteria": [
        "Critical/High findings from audit 06-matching-ui fixed",
        "pnpm lint and pnpm test pass"
      ],
      "priority": 6,
      "passes": true,
      "findingsFile": "06-matching-ui.json",
      "notes": "Load ralph-fix/findings/06-matching-ui.json. Fix MatchingView, ConnectAppleMusic, musickit."
    },
    {
      "id": "FIX-007",
      "title": "Fix 07-playlist-export findings",
      "description": "Apply code fixes for playlist export audit findings.",
      "acceptanceCriteria": [
        "Critical/High findings from audit 07-playlist-export fixed",
        "pnpm lint and pnpm test pass"
      ],
      "priority": 7,
      "passes": true,
      "findingsFile": "07-playlist-export.json",
      "notes": "Load ralph-fix/findings/07-playlist-export.json. Fix CreatePlaylistView and musickit add-tracks/create."
    },
    {
      "id": "FIX-008",
      "title": "Fix 08-app-pages-layout findings",
      "description": "Apply code fixes for app pages and layout audit findings.",
      "acceptanceCriteria": [
        "Critical/High findings from audit 08-app-pages-layout fixed",
        "pnpm lint and pnpm test pass"
      ],
      "priority": 8,
      "passes": true,
      "findingsFile": "08-app-pages-layout.json",
      "notes": "Load ralph-fix/findings/08-app-pages-layout.json. Fix page, layout, error boundaries."
    },
    {
      "id": "FIX-009",
      "title": "Fix 09-config-cors findings",
      "description": "Apply code fixes for config and CORS audit findings.",
      "acceptanceCriteria": [
        "Critical/High findings from audit 09-config-cors fixed",
        "pnpm lint and pnpm test pass"
      ],
      "priority": 9,
      "passes": true,
      "findingsFile": "09-config-cors.json",
      "notes": "Load ralph-fix/findings/09-config-cors.json. Fix config.ts, api.ts, cors.ts."
    },
    {
      "id": "FIX-010",
      "title": "Fix 10-error-handling findings",
      "description": "Apply code fixes for error handling audit findings.",
      "acceptanceCriteria": [
        "Critical/High findings from audit 10-error-handling fixed",
        "pnpm lint and pnpm test pass"
      ],
      "priority": 10,
      "passes": true,
      "findingsFile": "10-error-handling.json",
      "notes": "Load ralph-fix/findings/10-error-handling.json. Fix try/catch and error boundaries."
    },
    {
      "id": "FIX-011",
      "title": "Fix 11-types findings",
      "description": "Apply code fixes for types audit findings.",
      "acceptanceCriteria": [
        "Critical/High findings from audit 11-types fixed",
        "pnpm lint and pnpm test pass"
      ],
      "priority": 11,
      "passes": true,
      "findingsFile": "11-types.json",
      "notes": "Load ralph-fix/findings/11-types.json. Fix type definitions in core and web."
    },
    {
      "id": "FIX-012",
      "title": "Fix 12-tests findings",
      "description": "Apply code fixes and add tests per audit findings.",
      "acceptanceCriteria": [
        "Critical/High findings from audit 12-tests addressed",
        "pnpm lint and pnpm test pass"
      ],
      "priority": 12,
      "passes": true,
      "findingsFile": "12-tests.json",
      "notes": "Load ralph-fix/findings/12-tests.json. Add or fix tests; fix test infra issues."
    },
    {
      "id": "FIX-013",
      "title": "Fix 13-lib-utils findings",
      "description": "Apply code fixes for lib/utils audit findings.",
      "acceptanceCriteria": [
        "Critical/High findings from audit 13-lib-utils fixed",
        "pnpm lint and pnpm test pass"
      ],
      "priority": 13,
      "passes": true,
      "findingsFile": "13-lib-utils.json",
      "notes": "Load ralph-fix/findings/13-lib-utils.json. Fix api.ts, config.ts, cors.ts, musickit.ts."
    },
    {
      "id": "FIX-014",
      "title": "Fix 14-pwa-assets findings",
      "description": "Apply code fixes for PWA and assets audit findings.",
      "acceptanceCriteria": [
        "Critical/High findings from audit 14-pwa-assets fixed",
        "pnpm lint and pnpm test pass"
      ],
      "priority": 14,
      "passes": true,
      "findingsFile": "14-pwa-assets.json",
      "notes": "Load ralph-fix/findings/14-pwa-assets.json. Fix manifest, icons, layout meta."
    },
    {
      "id": "FIX-015",
      "title": "Fix 15-dead-code findings",
      "description": "Remove or fix dead code per audit findings.",
      "acceptanceCriteria": [
        "Critical/High findings from audit 15-dead-code addressed",
        "pnpm lint and pnpm test pass"
      ],
      "priority": 15,
      "passes": true,
      "findingsFile": "15-dead-code.json",
      "notes": "Load ralph-fix/findings/15-dead-code.json. Remove unused exports, orphan files, or fix as suggested."
    }
  ]
}
