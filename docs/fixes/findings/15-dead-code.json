{
  "auditTitle": "Dead Code & Unused Files",
  "auditDate": "2026-02-15T08:22:02Z",
  "filesExamined": 41,
  "totalFindings": 15,
  "summary": {
    "critical": 0,
    "high": 0,
    "medium": 3,
    "low": 12
  },
  "findings": [
    {
      "severity": "MEDIUM",
      "number": 1,
      "title": "Unused imports in `CreatePlaylistView` (likely lint/typecheck noise)",
      "file": "apps/web/src/features/playlist-export/CreatePlaylistView.tsx",
      "lines": "6-12",
      "category": "slop",
      "description": "`authorizeMusicKit` and `initMusicKit` are imported but never referenced in this module. If `noUnusedLocals` / ESLint unused-import rules are enabled, this becomes a failing warning/error; even without enforcement it’s dead code in the module’s import surface.",
      "code": "import {\n  isMusicKitAuthorized,\n  authorizeMusicKit,\n  initMusicKit,\n  createLibraryPlaylist,\n  addTracksToLibraryPlaylist,\n} from \"@/lib/musickit\";",
      "whyThisMatters": "Unused imports add noise, can break CI when lint/typecheck strictness increases, and obscure the actual runtime dependencies of the component."
    },
    {
      "severity": "LOW",
      "number": 2,
      "title": "Dead conditional (ternary branches are identical)",
      "file": "apps/web/src/app/api/setlist/proxy/route.ts",
      "lines": "33-37",
      "category": "dead-end",
      "description": "The ternary expression is redundant: both branches return `result.status`. This is dead branching that can’t produce different behavior.",
      "code": "const result = await handleSetlistProxy(id);\nconst status = \"error\" in result ? result.status : result.status;\nconst body = \"error\" in result ? { error: result.error } : result.body;\nreturn new Response(JSON.stringify(body), { status, headers: corsHeaders(request) });",
      "whyThisMatters": "Redundant logic makes control flow harder to reason about and can hide real branching errors when future edits are made."
    },
    {
      "severity": "LOW",
      "number": 3,
      "title": "Exported helpers are unused within the repo (`apiUrl`, `healthUrl`)",
      "file": "apps/web/src/lib/api.ts",
      "lines": "12-19, 24",
      "category": "dead-end",
      "description": "Within this repository, `apiUrl` and `healthUrl` are exported but have no import sites. They increase module surface area without corresponding usage.",
      "code": "export function apiUrl(path: string): string {\n  const raw = API_BASE_URL || \"\";\n  const base = raw.replace(/\\/$/, \"\").replace(/\\/api$/i, \"\");\n  const p = path.startsWith(\"/\") ? path : `/${path}`;\n  const apiSegment = \"/api\";\n  if (base) return `${base}${apiSegment}${p}`;\n  return `${API_PATH}${p}`;\n}\n\nexport const healthUrl = () => apiUrl(\"/health\");",
      "whyThisMatters": "Unused exports create misleading “supported” APIs and make later refactors riskier (unclear what is intentionally public vs. accidental)."
    },
    {
      "severity": "LOW",
      "number": 4,
      "title": "`getAllowOrigin` is exported but only used internally",
      "file": "apps/web/src/lib/cors.ts",
      "lines": "8-18",
      "category": "dead-end",
      "description": "`getAllowOrigin` is exported but (in this repo) only referenced within `cors.ts` itself (`corsHeaders`, `corsHeadersForOptions`). No other module imports it.",
      "code": "export function getAllowOrigin(origin: string | null): string | null {\n  const configured = (process.env.ALLOWED_ORIGIN ?? \"\").trim();\n  const isLocalOrigin =\n    origin &&\n    (origin.startsWith(\"http://localhost\") || origin.startsWith(\"http://127.0.0.1\"));\n  if (configured) {\n    const single = configured.split(\",\")[0].trim().replace(/\\/$/, \"\");\n    return single || (isLocalOrigin ? origin : null);\n  }\n  return isLocalOrigin ? origin : null;\n}",
      "whyThisMatters": "Exporting internal helpers grows the “API surface” other code might start depending on later, making cleanup harder."
    },
    {
      "severity": "LOW",
      "number": 5,
      "title": "Multiple exports in `musickit.ts` are unused outside the module",
      "file": "apps/web/src/lib/musickit.ts",
      "lines": "53-70, 125-128, 205-208",
      "category": "dead-end",
      "description": "The following are exported but have no import sites in this repo:\n- `fetchDeveloperToken` (used internally by `initMusicKit`)\n- `getMusicKitInstance` (not referenced anywhere)\n- `CreatePlaylistResult` (used internally as the return type of `createLibraryPlaylist`, but never imported by consumers)",
      "code": "export async function fetchDeveloperToken(): Promise<string> {\n  if (isTokenValid()) return cachedToken!;\n  // ...\n}\n\nexport function getMusicKitInstance(): MusicKitInstance {\n  if (!configuredInstance) throw new Error(\"MusicKit not configured. Call initMusicKit() first.\");\n  return configuredInstance;\n}\n\nexport interface CreatePlaylistResult {\n  id: string;\n  url?: string;\n}",
      "whyThisMatters": "Unused exports make it unclear which functions/types are meant to be consumed by the app vs. implementation details."
    },
    {
      "severity": "LOW",
      "number": 6,
      "title": "Barrel re-export is unused (`SetlistPreview`)",
      "file": "apps/web/src/features/setlist-import/index.ts",
      "lines": "1-2",
      "category": "dead-end",
      "description": "`SetlistPreview` is exported from the feature barrel but there are no imports of `SetlistPreview` from `@/features/setlist-import` in this repo. The component is consumed via direct relative import from `SetlistImportView.tsx` instead.",
      "code": "export { SetlistImportView } from \"./SetlistImportView\";\nexport { SetlistPreview } from \"./SetlistPreview\";",
      "whyThisMatters": "Dead barrel exports bloat the feature’s public surface and encourage inconsistent import patterns."
    },
    {
      "severity": "LOW",
      "number": 7,
      "title": "Exported props type is unused outside its module (`ConnectAppleMusicProps`)",
      "file": "apps/web/src/features/matching/ConnectAppleMusic.tsx",
      "lines": "6-9",
      "category": "dead-end",
      "description": "`ConnectAppleMusicProps` is exported but has no import sites in this repo (it’s only used locally to type the component parameters).",
      "code": "export interface ConnectAppleMusicProps {\n  onAuthorized?: () => void;\n  label?: string;\n}",
      "whyThisMatters": "Exporting types that aren’t consumed externally adds surface area without value and can accumulate as dead public API."
    },
    {
      "severity": "LOW",
      "number": 8,
      "title": "Exported props type is unused outside its module (`MatchingViewProps`)",
      "file": "apps/web/src/features/matching/MatchingView.tsx",
      "lines": "28-31",
      "category": "dead-end",
      "description": "`MatchingViewProps` is exported but not imported anywhere in the repo (it’s only used locally in the component signature).",
      "code": "export interface MatchingViewProps {\n  setlist: Setlist;\n  onProceedToCreatePlaylist: (matches: MatchRow[]) => void;\n}",
      "whyThisMatters": "Same pattern as other unused exported prop types: it expands public API without corresponding consumers."
    },
    {
      "severity": "LOW",
      "number": 9,
      "title": "Exported props type is unused outside its module (`CreatePlaylistViewProps`)",
      "file": "apps/web/src/features/playlist-export/CreatePlaylistView.tsx",
      "lines": "15-18",
      "category": "dead-end",
      "description": "`CreatePlaylistViewProps` is exported but not imported anywhere else in the repo.",
      "code": "export interface CreatePlaylistViewProps {\n  setlist: Setlist;\n  matchRows: MatchRow[];\n}",
      "whyThisMatters": "Unused exports create long-term cleanup debt and make it harder to tell what is part of a stable API."
    },
    {
      "severity": "LOW",
      "number": 10,
      "title": "`api` entrypoint re-exports types that are unused in the repo",
      "file": "apps/api/src/index.ts",
      "lines": "1-5",
      "category": "dead-end",
      "description": "`DevTokenResponse` and `ProxyResponse` are re-exported from the `api` package entrypoint but have no import sites anywhere in the repo (outside audit/docs). The runtime exports (`handleDevToken`, `handleHealth`, `handleSetlistProxy`) are used, but the type exports appear unused.",
      "code": "export { handleDevToken } from \"./routes/apple/dev-token.js\";\nexport type { DevTokenResponse } from \"./routes/apple/dev-token.js\";\nexport { handleHealth } from \"./routes/health.js\";\nexport { handleSetlistProxy } from \"./routes/setlist/proxy.js\";\nexport type { ProxyResponse } from \"./routes/setlist/proxy.js\";",
      "whyThisMatters": "Unused type exports grow the published surface of the `api` module, which can lead to accidental coupling and confusion about supported contracts."
    },
    {
      "severity": "LOW",
      "number": 11,
      "title": "Exported type alias is unused outside its module (`FetchSetlistResult`)",
      "file": "apps/api/src/lib/setlistfm.ts",
      "lines": "72-75",
      "category": "dead-end",
      "description": "`FetchSetlistResult` is exported but not imported anywhere else in the repo. It is only referenced locally as the return type of `fetchSetlistFromApi`.",
      "code": "export type FetchSetlistResult =\n  | { ok: true; body: unknown }\n  | { ok: false; status: number; message: string };",
      "whyThisMatters": "Dead exported types add surface area and can mislead readers into thinking there are multiple consumers."
    },
    {
      "severity": "MEDIUM",
      "number": 12,
      "title": "Orphan core “apple” module: placeholder type exported but unused across the repo",
      "file": "packages/core/src/apple/index.ts",
      "lines": "1",
      "category": "dead-end",
      "description": "`@repo/core` re-exports `AppleCatalogTrack` via `packages/core/src/apple/index.ts`, but there are no import sites for `AppleCatalogTrack` anywhere in the repository (outside audit/docs). This makes the entire `core/apple` surface effectively dead code from the repo’s perspective.",
      "code": "export type { AppleCatalogTrack } from './types.js';",
      "whyThisMatters": "Shipping unused modules/types increases maintenance burden and encourages “placeholder” APIs to linger indefinitely."
    },
    {
      "severity": "MEDIUM",
      "number": 13,
      "title": "Orphan core matching exports: types and helper exported publicly but unused in the repo",
      "file": "packages/core/src/matching/index.ts",
      "lines": "1-3",
      "category": "dead-end",
      "description": "The core matching entrypoint exports:\n- `AppleTrack`, `MatchResult` from `./types.js`\n- `normalizeTrackName` from `./normalize.js`\n\nWithin this repo, there are no imports of `AppleTrack`, `MatchResult`, or `normalizeTrackName`. Additionally, `packages/core/src/matching/types.ts` is only referenced via a type-only re-export and has no direct import sites.",
      "code": "export type { AppleTrack, MatchResult } from \"./types.js\";\nexport { normalizeTrackName } from \"./normalize.js\";\nexport { buildSearchQuery } from \"./search-query.js\";",
      "whyThisMatters": "Public exports that have no consumers are dead surface area; they make it harder to distinguish “core API” from unused leftovers."
    },
    {
      "severity": "LOW",
      "number": 14,
      "title": "Core setlist barrel re-exports types that are unused in the repo",
      "file": "packages/core/src/setlist/index.ts",
      "lines": "2-8",
      "category": "dead-end",
      "description": "The repo imports `SetlistFmResponse` from `@repo/core`, but does not import the following re-exported types anywhere:\n- `SetlistFmArtist`\n- `SetlistFmVenue`\n- `SetlistFmSong`\n- `SetlistFmSet`",
      "code": "export type {\n  SetlistFmResponse,\n  SetlistFmArtist,\n  SetlistFmVenue,\n  SetlistFmSong,\n  SetlistFmSet,\n} from \"./setlistfm-types.js\";",
      "whyThisMatters": "Unused re-exports expand the core package’s apparent contract, increasing cognitive load for readers and maintainers."
    },
    {
      "severity": "LOW",
      "number": 15,
      "title": "Empty `.gitkeep` files in `src/` trees are orphan placeholders",
      "file": "apps/api/src/middleware/.gitkeep",
      "lines": "(empty file)",
      "category": "dead-end",
      "description": "These empty placeholder files are present in the audited `src/` trees and have no import/usage sites (they only exist to keep otherwise-empty directories in git):\n\n- `apps/api/src/middleware/.gitkeep`\n- `apps/web/src/components/.gitkeep`\n- `apps/web/src/lib/.gitkeep`\n- `apps/web/src/types/.gitkeep`",
      "code": "(empty file)",
      "whyThisMatters": "`.gitkeep` placeholders often indicate unfinished scaffolding or abandoned structure; over time they can obscure which directories are intentionally used vs. vestigial."
    }
  ],
  "auditId": "15-dead-code",
  "sourceFile": "15-dead-code.md"
}