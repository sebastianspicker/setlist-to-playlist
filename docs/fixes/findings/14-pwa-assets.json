{
  "auditTitle": "PWA & Static Assets",
  "auditDate": "2026-02-15T08:15:35Z",
  "filesExamined": 8,
  "totalFindings": 8,
  "summary": {
    "critical": 0,
    "high": 2,
    "medium": 3,
    "low": 3
  },
  "findings": [
    {
      "severity": "HIGH",
      "number": 1,
      "title": "Manifest icon `sizes` do not match the actual PNG dimensions (and both icon files are identical)",
      "file": "apps/web/public/manifest.webmanifest",
      "lines": "9-21",
      "category": "will-break",
      "description": "The manifest declares two icons with `sizes` `192x192` and `512x512`, but both referenced files are actually **2048×2048** PNGs. Additionally, `icon-192.png` and `icon-512.png` are byte-for-byte identical (same hash), so the app is not providing distinct size variants at all. This directly contradicts the intent implied by the filenames and by `apps/web/public/icons/.gitkeep`.",
      "code": "// apps/web/public/manifest.webmanifest:9-21\n\"icons\": [\n  { \"src\": \"/icons/icon-192.png\", \"sizes\": \"192x192\", \"type\": \"image/png\", \"purpose\": \"any\" },\n  { \"src\": \"/icons/icon-512.png\", \"sizes\": \"512x512\", \"type\": \"image/png\", \"purpose\": \"any\" }\n]",
      "whyThisMatters": "Installers/launchers select icons by declared size; mismatches can lead to wrong selection, unexpected scaling, or icons being ignored, causing broken/low-quality installed-app branding."
    },
    {
      "severity": "MEDIUM",
      "number": 2,
      "title": "PWA icons are extremely large for their intended roles (multi-megabyte PNGs)",
      "file": "apps/web/public/icons/icon-192.png",
      "lines": "N/A (binary asset)",
      "category": "will-break",
      "description": "Both PWA icon files are ~4.2 MB each despite being declared (and named) as small app icons. This is disproportionate for icons and suggests the assets are not optimized for typical PWA usage.",
      "code": "$ wc -c apps/web/public/icons/icon-192.png apps/web/public/icons/icon-512.png\n4205048 apps/web/public/icons/icon-192.png\n4205048 apps/web/public/icons/icon-512.png\n8410096 total",
      "whyThisMatters": "Large icon payloads increase storage/bandwidth costs and can degrade perceived performance during install flows and on devices that fetch these assets eagerly."
    },
    {
      "severity": "MEDIUM",
      "number": 3,
      "title": "PWA icons embed XMP/C2PA/IPTC metadata (including provenance strings), increasing size and potentially leaking generation/tooling details",
      "file": "apps/web/public/icons/icon-192.png",
      "lines": "N/A (binary asset)",
      "category": "slop",
      "description": "The icon PNG contains embedded metadata chunks (XMP/IPTC/C2PA). The extracted strings include `iTXtXML:com.adobe.xmp` and `photoshop:Credit=\"Made with Google AI\"`, along with C2PA-related certificate/signature material. This kind of embedded metadata is atypical for small app icons and contributes to bloat and unintended disclosure of tooling/provenance.",
      "code": "$ xxd -l 64 apps/web/public/icons/icon-192.png\n... IHDR .... zTXtRaw profile type iptc ...\n\n$ strings -n 8 apps/web/public/icons/icon-192.png | sed -n '1,20p'\nzTXtRaw profile type iptc\niTXtXML:com.adobe.xmp\n... photoshop:Credit=\"Made with Google AI\" ...\n... c2pa.signature ...\n... Google LLC ...",
      "whyThisMatters": "Metadata increases asset size and can expose provenance or toolchain details in shipped static assets (even when the app otherwise intends to be minimal/public-only)."
    },
    {
      "severity": "HIGH",
      "number": 4,
      "title": "No service worker present; manifest implies an “app-like” install but there is no offline/runtime caching implementation",
      "file": "apps/web/next.config.ts",
      "lines": "1-6",
      "category": "unfinished",
      "description": "The web app includes a manifest and sets `display: \"standalone\"` (manifest line 6), but there is no service worker file and no service worker registration/configuration anywhere in `apps/web`. `apps/web/next.config.ts` contains no PWA-related configuration, and searches for service worker usage return no matches. As-is, this is not an offline-capable PWA; installability prompts on some platforms/browsers may not appear without a service worker.",
      "code": "// apps/web/next.config.ts:1-6\nimport type { NextConfig } from 'next';\n\nconst nextConfig: NextConfig = {\n  reactStrictMode: true,\n  transpilePackages: ['@repo/core', '@repo/shared', 'api'],\n};\n\nexport default nextConfig;",
      "whyThisMatters": "Users may expect offline resilience and installability from a “standalone” manifest-driven app experience; without a service worker, those expectations will not be met and some PWA checks will fail."
    },
    {
      "severity": "MEDIUM",
      "number": 5,
      "title": "Theme color signals are inconsistent across manifest, HTML meta, and actual page styling",
      "file": "apps/web/src/app/layout.tsx",
      "lines": "17-20",
      "category": "will-break",
      "description": "There are three different “theme” signals:\n- HTML meta theme-color is `#1a1a1a` (dark).\n- Manifest `theme_color` is `#000000` (different dark).\n- Global CSS sets `body` background to `#fff` with text color `#1a1a1a` (light page).\n\nThis inconsistency can cause browser UI (address bar/task switcher) and splash/launch surfaces to use colors that do not match the rendered app, creating visible flashes or mismatched framing around the app.",
      "code": "// apps/web/src/app/layout.tsx:17-20\n<html lang=\"en\">\n  <head>\n    <meta name=\"theme-color\" content=\"#1a1a1a\" />\n  </head>",
      "whyThisMatters": "Theme/splash colors are used outside the page render (OS UI, launch surfaces). Mismatches produce inconsistent branding and noticeable visual artifacts."
    },
    {
      "severity": "MEDIUM",
      "number": 6,
      "title": "No favicon / app icon links provided via App Router conventions or `<link>` tags; browsers and iOS home-screen flows likely lack proper icons",
      "file": "apps/web/src/app/layout.tsx",
      "lines": "17-21",
      "category": "unfinished",
      "description": "`layout.tsx` defines only a `theme-color` meta tag in `<head>` and does not provide any icon link tags (e.g., `rel=\"icon\"`, `rel=\"apple-touch-icon\"`). Additionally, `apps/web/public` does not contain `favicon.ico` (only `manifest.webmanifest`), and `apps/web/src/app` contains no App Router icon routes (e.g., `icon.png`, `apple-icon.png`). This commonly results in:\n- `/favicon.ico` requests returning 404 (browser tab icon missing/default).\n- iOS “Add to Home Screen” using a suboptimal icon or a screenshot-like tile rather than a curated app icon.",
      "code": "// apps/web/src/app/layout.tsx:17-21\n<head>\n  <meta name=\"theme-color\" content=\"#1a1a1a\" />\n</head>",
      "whyThisMatters": "Missing icon assets degrade UX/branding, generate noisy 404s in logs/DevTools, and reduce the quality of installation/add-to-home-screen experiences."
    },
    {
      "severity": "LOW",
      "number": 7,
      "title": "Manifest omits explicit `scope` and uses root-absolute URLs, making behavior sensitive to non-root deployments",
      "file": "apps/web/public/manifest.webmanifest",
      "lines": "5, 11, 17",
      "category": "will-break",
      "description": "The manifest does not define `scope` and uses root-absolute paths for `start_url` and icon `src` values. This works when the app is deployed at the domain root, but it makes the manifest’s navigation and asset resolution sensitive to deployments under a subpath (where `start_url: \"/\"` and `src: \"/icons/...\"` target the domain root, not the app subpath).",
      "code": "// apps/web/public/manifest.webmanifest:5, 11, 17\n\"start_url\": \"/\",\n\"src\": \"/icons/icon-192.png\",\n\"src\": \"/icons/icon-512.png\",",
      "whyThisMatters": "Subpath deployments can produce broken icons and unexpected launch URLs if the manifest assumes a root deployment context."
    },
    {
      "severity": "LOW",
      "number": 8,
      "title": "Manifest provides only `purpose: \"any\"` icons; no `maskable` variant for adaptive icon rendering",
      "file": "apps/web/public/manifest.webmanifest",
      "lines": "9-21",
      "category": "slop",
      "description": "Both manifest icons declare `purpose: \"any\"` and there is no `maskable` icon variant. On platforms that render adaptive icons, non-maskable artwork can be cropped in undesirable ways.",
      "code": "// apps/web/public/manifest.webmanifest:14, 20\n\"purpose\": \"any\"",
      "whyThisMatters": "Installed-app icons may appear inconsistently cropped across Android launchers and device manufacturers."
    }
  ],
  "auditId": "14-pwa-assets",
  "sourceFile": "14-pwa-assets.md"
}